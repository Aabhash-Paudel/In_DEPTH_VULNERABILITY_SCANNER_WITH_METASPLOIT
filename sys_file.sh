#!/bin/bash

current_ip=$(ip -4 addr show | grep -oP '(?<=inet\s)\d+(\.\d+){3}' | grep -v '127.0.0.1' | head -n 1)
subnet=$(ip -4 route | grep -v default | grep -v link-local | grep -oP '\d+(\.\d+){3}/\d+' | head -n 1)
network=$(echo $subnet | cut -d'/' -f1 | cut -d'.' -f1-3)

for ip in $(seq 1 254); do
    ping -c 1 -W 1 $network.$ip | grep "64 bytes" | cut -d " " -f 4 | tr -d ":" &
done

wait
